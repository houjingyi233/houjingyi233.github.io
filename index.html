<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>houjingyi</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="houjingyi"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="houjingyi"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="houjingyi"><meta property="og:url" content="http://yoursite.com/"><meta property="og:site_name" content="houjingyi"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:author" content="houjingyi"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com"},"headline":"houjingyi","image":["http://yoursite.com/img/og_image.png"],"author":{"@type":"Person","name":"houjingyi"},"publisher":{"@type":"Organization","name":"houjingyi","logo":{"@type":"ImageObject"}},"description":null}</script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
        <script>
            function switchTab(element) {
                const id = element.parentElement.id;
                const tabElements = element.parentElement.parentElement.children;
                const contentElements = element.parentElement.parentElement.parentElement.parentElement.children[1].children;
                for (let i = 0; i < tabElements.length; i++) {
                    const $tab = tabElements[i];
                    const $content = contentElements[i];
                    if ($tab.id === id) {
                        $tab.classList.add('is-active');
                    } else {
                        $tab.classList.remove('is-active');
                    }
                    if ($content.id === id) {
                        $content.classList.remove('is-hidden');
                    } else {
                        $content.classList.add('is-hidden');
                    }
                }
            }
        </script>
        <!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">houjingyi</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-08-01T06:45:41.000Z" title="8/1/2021, 2:45:41 PM">2021-08-01</time>发表</span><span class="level-item"><time dateTime="2021-08-05T01:55:08.860Z" title="8/5/2021, 9:55:08 AM">2021-08-05</time>更新</span><span class="level-item">4 分钟读完 (大约619个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/01/new-dll-hijacking-scenario-found-by-accident/">new dll hijacking scenario found by accident</a></h1><div class="content"><p>Speaking of dll hijacking, many people may think it is very useless. </p>
<p>Some times ago, I accidentally discovered vulnerabilities in dll loading mechanism in cisco webex teams/IBM Db2/VMware ThinApp that can lead to LPE, and as far as I know, no one has ever mentioned this kind of dll hijacking scenario before.</p>
<p>Vendor advisories:</p>
<p><a target="_blank" rel="noopener" href="https://www.vmware.com/security/advisories/VMSA-2021-0015.html">VMware ThinApp update addresses a DLL hijacking vulnerability</a><br><a target="_blank" rel="noopener" href="https://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-webex-teams-dll-drsnH5AN">Cisco Webex Teams Client for Windows DLL Hijacking Vulnerability</a><br><a target="_blank" rel="noopener" href="https://www.ibm.com/support/pages/node/6370023">Security Bulletin: IBM® Db2® could allow a local authenticated attacker to execute arbitrary code on the system, caused by DLL search order hijacking vulnerability in Microsoft Windows client. (CVE-2020-4739)</a></p>
<p>Details I posted to full disclosure mailing list:</p>
<p><a target="_blank" rel="noopener" href="https://seclists.org/fulldisclosure/2021/Jul/35">VMware ThinApp DLL hijacking vulnerability</a><br><a target="_blank" rel="noopener" href="https://seclists.org/fulldisclosure/2021/Feb/73">IBM(R) Db2(R) Windows client DLL Hijacking Vulnerability(0day)</a><br><a target="_blank" rel="noopener" href="https://seclists.org/fulldisclosure/2020/Oct/16">Cisco Webex Teams Client for Windows DLL Hijacking Vulnerability</a></p>
<p>I will not repeat the details of these vulnerabilities, I will analyze the dll path processing mechanism in ntdll.dll. </p>
<p>In <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya">document</a> microsoft said:</p>
<p>The first directory searched is the directory containing the image file used to create the calling process (for more information, see the CreateProcess function). Doing this allows private dynamic-link library (DLL) files associated with a process to be found without adding the process’s installed directory to the PATH environment variable. If a relative path is specified, the entire relative path is appended to every token in the DLL search path list. <strong>To load a module from a relative path without searching any other path, use GetFullPathName to get a nonrelative path and call LoadLibrary with the nonrelative path.</strong> For more information on the DLL search order, see Dynamic-Link Library Search Order.</p>
<p>So…What will happen if we provide a relative path to LoadLibrary?</p>
<p>Let us take following code in VMware ThinApp as example:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadLibraryExW(<span class="string">L&quot;\\DummyTLS\\dummyTLS.dll&quot;</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>The process is:KernelBase!LoadLibraryExW-&gt;ntdll!LdrpLoadDll-&gt;ntdll!LdrpPreprocessDllName:</p>
<p><img src="https://z3.ax1x.com/2021/07/16/WMWmcQ.png"></p>
<p>So RtlDetermineDosPathNameType_Ustr will return 4(RtlPathTypeRooted) and LdrpGetFulPath will return C:\DummyTLS\dummyTLS.dll. You can refer to code in ReactOS:<a target="_blank" rel="noopener" href="https://github.com/mirror/reactos/blob/master/reactos/lib/rtl/path.c">https://github.com/mirror/reactos/blob/master/reactos/lib/rtl/path.c</a>.</p>
<p><img src="https://z3.ax1x.com/2021/07/16/WMfdxg.md.png"></p>
<p>So now we know Windows will treat relative path in LoadLibrary/AddDllDirectory…as the path rooted relative to the current disk designator, which is usually C:\. Since non-admin user can create directory under C:\ and write file to it, this cause LPE.</p>
<p>I also reported my findings to MSRC, but MSRC said this is the default behavior. I am not surprised, if the default behavior is to let developers write vulnerable code, that’s fine.</p>
<p><img src="https://s1.ax1x.com/2020/10/09/0DQdxA.png"></p>
<p>I am sharing my discovery because I haven’t seen anyone mention these and similar vulnerabilities exist in other products absolutely. At the same time, I want to remind developers should make sure that all your dlls are loaded correctly.</p>
<p>Some thoughts:</p>
<p>1.I don’t understand why Microsoft handle path this way.</p>
<p>2.This kind of bug would not have appeared if developers had been more careful. </p>
<p>3.Using relative path is dangerous and I will share some RCE/LPE vulnerabilities I found because of relative path.</p>
<p>4.Non-admin user can create directory under C:\ and write file to it, this is not right and it caused many LPE vulnerabilities.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-10-13T06:45:41.000Z" title="10/13/2020, 2:45:41 PM">2020-10-13</time>发表</span><span class="level-item"><time dateTime="2021-08-05T01:44:17.120Z" title="8/5/2021, 9:44:17 AM">2021-08-05</time>更新</span><span class="level-item">16 分钟读完 (大约2415个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/13/macOS%E5%92%8CiOS%E9%80%86%E5%90%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">macOS和iOS逆向环境搭建</a></h1><div class="content"><p>最近也在慢慢开始接触一些macOS/iOS安全，首先一个难题就是环境搭建。现在的情况是我有一台mac pro 13 2020和一个iphone8，分别记录一下vmware安装macOS虚拟机和iOS越狱降级这两个在调试macOS/iOS内核之前必须做的准备工作。</p>
<h2 id="vmware安装macOS虚拟机"><a href="#vmware安装macOS虚拟机" class="headerlink" title="vmware安装macOS虚拟机"></a>vmware安装macOS虚拟机</h2><p>目前主要有两种方式搭建macOS虚拟机：<br>1.在macOS物理机上能够使用vmware fusion/virtualbox或者vagrant搭建macOS虚拟机，说起来倒是很简单：用vmware fusion应该不会有什么坑，用virtualbox也有人把要踩的坑总结好了：<a target="_blank" rel="noopener" href="https://github.com/AlexanderWillner/runMacOSinVirtualBox">Run macOS 10.15 Catalina (and other versions) in VirtualBox on macOS</a>。用vagrant参考<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/terminal/151326.html">偏执的iOS逆向研究员：收集全版本的macOS iOS+越狱+内核调试</a>这篇文章即可。比较麻烦的是如果用vmware fusion/virtualbox的话sb苹果是不提供完整系统镜像的，得自己找；用vagrant的话又因为大家都知道的原因你得有一个很稳的梯子下那十几个G的镜像文件。<br>2.在linux/windows物理机上因为版权的原因默认是没有合法的手段让你装macOS虚拟机的，最最最常见的方法就是用unlocker patch掉vmware workstation pro然后安装macOS，当然镜像还是得自己找。推荐使用这个branch的unlocker：<a target="_blank" rel="noopener" href="https://github.com/BDisp/unlocker/releases">https://github.com/BDisp/unlocker/releases</a>，当前最新的版本是3.0.3。这个branch的unlocker据我测试应该是能直接用不会有什么坑。不过这里还是要注意一个问题，unlocker中的gettools.exe会去下载com.vmware.fusion.zip.tar并且下载速度很慢，我们可以先去把这个包下好，下载的地址是到<a target="_blank" rel="noopener" href="http://softwareupdate.vmware.com/cds/vmw-desktop/fusion">http://softwareupdate.vmware.com/cds/vmw-desktop/fusion</a>找你用的vmware workstation pro对应的版本即可。更改gettool.py的代码，把下载com.vmware.fusion.zip.tar的代码注释掉，用pyinstaller重新打包一个gettools.exe。以管理员权限运行win-install.cmd，在time.sleep(20)的时候把下载好的com.vmware.fusion.zip.tar拷贝进tools目录即可。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXagLd.png"></p>
<p>接下来就可以安装macOS了，这里我用的镜像是网上找的一个10.10.2的，如果提示你”没有足够的空间来进行安装”按照网上的方法抹掉vmware的硬盘即可：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wzl19870309/article/details/71194389">OS X Base System 上没有足够的空间来进行安装</a>。除此之外我没有遇到任何问题。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaReA.png"></p>
<p>最后就是安装VMware Tools了，gettools.exe已经下载好了darwin.iso和darwinPre15.iso，我的vmware workstation pro是15.5.1版的，应该用darwinPre15.iso。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXa6Qe.png"></p>
<p>关闭虚拟机，编辑虚拟机，设置CD/DVD，使用ISO映像为darwinPre15.iso。开启虚拟机之后会看到桌面的VMware Tools，直接安装就OK了。</p>
<p>很多时候如果你发现github上某个工具因为已经没有维护而不能使用的时候一个小技巧就是去看看issue或者pull request里面有没有人还在继续维护。本来最先搜到的是<a target="_blank" rel="noopener" href="https://github.com/theJaxon/unlocker">https://github.com/theJaxon/unlocker</a>，因为没有维护了所以遇到一点问题，在pull request里面找到了另外有人维护的<a target="_blank" rel="noopener" href="https://github.com/BDisp/unlocker">https://github.com/BDisp/unlocker</a>。去年也是，升级了vmware workstation pro之后<a target="_blank" rel="noopener" href="https://github.com/sysprogs/VirtualKD">https://github.com/sysprogs/VirtualKD</a>也没法用了，在issue里面找到了另外有人维护的<a target="_blank" rel="noopener" href="https://github.com/4d61726b/VirtualKD-Redux">https://github.com/4d61726b/VirtualKD-Redux</a>。想学习MachO文件格式，<a target="_blank" rel="noopener" href="https://github.com/gdbinit/MachOView">https://github.com/gdbinit/MachOView</a>早已无人维护，在issue里面找到了另外有人维护的<a target="_blank" rel="noopener" href="https://github.com/mythkiven/MachOView">https://github.com/mythkiven/MachOView</a>……感谢这些编写维护开源软件的大神，不然这些问题真是让人够头疼的。</p>
<h2 id="iOS越狱降级"><a href="#iOS越狱降级" class="headerlink" title="iOS越狱降级"></a>iOS越狱降级</h2><p>首先肯定大家都明白越狱是个什么意思，就和你研究android安全肯定需要有一台root过的手机一样，我们也需要一台越狱的iPhone。不过越狱有四种。</p>
<p>完美越狱(Tethered Jailbreak)<br>不完美越狱(Untethered Jailbreak)<br>半完美越狱(Semi-tethered Jailbreak)<br>半不完美越狱(Semi-untethered Jailbreak)</p>
<p>我画了个图，你一看就明白了。tether是拴绳拴链的意思，tethered就是需要数据线连电脑，untethered就是不需要数据线连电脑。</p>
<p><img src="https://s1.ax1x.com/2020/10/13/0feHeJ.png"></p>
<p>如果你不知道你的iPhone能不能越狱，你可以到这个网站上查：<a target="_blank" rel="noopener" href="https://canijailbreak.com/">https://canijailbreak.com/</a></p>
<p>一看之后你就会发现这几年出的越狱都是半不完美越狱，因为现在苹果的保护措施越来越完善，完美越狱有当然是有，但是能值很多钱，人家不会公开。这几年越狱界最大的新闻就是被称为史诗级漏洞的checkm8了，因为这个漏洞存在于BootROM中，无法通过软件更新的方式修复，所以理论上来讲只要你的iPhone在受影响的设备范围内，不管你怎么升级系统都能用这个漏洞越狱。我们直接去<a target="_blank" rel="noopener" href="https://checkra.in/">https://checkra.in/</a>下载越狱程序按照上面的说明来就可以了。越狱之后该在Cydia里面装什么等等网上都有很多文章了，这里就不再说了。</p>
<p>接下来说说怎么降级。降级不是你想降就能降的，iOS设备上的固件恢复需要配合Apple服务器进行校验，Apple停止公开验证某个固件版本时，iOS设备就不能从高版本恢复到停止验证的版本。iOS在更新设备固件的过程中会将设备的ECID等信息以及一个一次使用的nonce发送给Apple服务器，服务器在校验通过后会返回校验结果，结果使用非对称算法加密，在没有私钥的情况下无法解密也无法伪造。但是我们可以将校验结果保存下来，之后Apple不再提供此版本校验的时候重放校验过程，实现iOS降级到不提供验证的版本。</p>
<p>说了一大堆可能有点晕了，我们来实际操作一下。现在Apple只会验证最新的iOS 14.0.1版本，我的iPhone8是iOS 13，因为我以前没有保存校验结果，所以理论上现在我没有任何办法将我的iPhone8降级到一个更低的版本。但是现在我可以保存14.0.1的校验结果，假设说以后我的iPhone8升级到了iOS 14.0.2，理论上我就可以通过这个保存的校验结果降级到14.0.1。</p>
<p>首先checkra1n越狱之后我们添加repo:halo-michale.github.io/repo/，安装插件Generator Auto Setter，默认会写入Generator值为一串0x1把nonce固定，这样也方便我们以后降级。然后我们打开爱思助手查ECID：</p>
<p><img src="https://s1.ax1x.com/2020/10/13/0fta24.jpg"></p>
<p>点击查看设备详情查硬件模型：</p>
<p><img src="https://s1.ax1x.com/2020/10/13/0ft7If.jpg"></p>
<p>然后到<a target="_blank" rel="noopener" href="https://tsssaver.1conan.com/">https://tsssaver.1conan.com/</a>把这些信息填进去点击submit，就可以下载shsh2文件了。在将来的某个时候如果想降级到这个版本我们可以使用<a target="_blank" rel="noopener" href="https://github.com/tihmstar/futurerestore">futurerestore</a>，在设备进入kDFU/pwnDFU模式之后用像这样的命令完成降级：</p>
<p>./futurerestore -t xxx.shsh2 –latest-sep –latest-baseband xxxx.ipsw</p>
<p>更新的iPhone和iOS操作似乎还有些不一样，以后如果需要的话再补充。</p>
<p>不过这还没完，苹果还有一个SEP机制(Secure Enclave Processor，安全区域处理器)，如果降级的iOS系统与当前的SEP不兼容，那么降级会被禁止。iOS13范围内SEP都是兼容的，那么你只要备份过对应版本的shsh2文件，就可以在iOS13范围内降级。但是网上我看说如果你升级到iOS14，即使有iOS13的shsh2文件就会因为SEP不兼容无法降级。</p>
<p>所以iOS的越狱降级这些还真的挺头疼的……</p>
<p>最后再扯下如何入门macOS/iOS安全，经过一段时间的探索我有如下想法：</p>
<p>1.学<a target="_blank" rel="noopener" href="http://www.newosxbook.com/index.php">http://www.newosxbook.com/index.php</a>上的三本书，建议海淘。国内那些写macOS/iOS的书我翻了几本得出的结论是都不用买。当然就这么看肯定是非常枯燥的，所以我建议有时间就翻翻，一次也不用看太多。</p>
<p>2.学习各种出现的macOS/iOS漏洞，主要是project zero的。</p>
<p>目前我也是积极在整理这些历史漏洞：<a target="_blank" rel="noopener" href="https://github.com/houjingyi233/macOS-iOS-exploit-writeup">https://github.com/houjingyi233/macOS-iOS-exploit-writeup</a></p>
<p>3.从推特或者关注的大牛那里获取一些他们的研究成果然后学习。</p>
<p>如果遇到其它环境方面的问题我也会继续在这篇文章里面更新，2020年争取也写一些macOS/iOS漏洞研究方面的文章！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-04-05T06:45:41.000Z" title="4/5/2020, 2:45:41 PM">2020-04-05</time>发表</span><span class="level-item"><time dateTime="2021-08-05T01:55:58.240Z" title="8/5/2021, 9:55:58 AM">2021-08-05</time>更新</span><span class="level-item">11 分钟读完 (大约1661个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/04/05/%E4%B8%80%E6%AC%A1%E7%BB%99%E7%88%B1%E5%A5%87%E8%89%BASRC%E6%8A%A5%E5%91%8A%E6%BC%8F%E6%B4%9E%E7%9A%84%E7%BB%8F%E5%8E%86/">一次给爱奇艺SRC报告漏洞的经历</a></h1><div class="content"><p>先给大家看看时间线吧(漏洞已经被修复)：<br>2020-01-06：发现爱奇艺客户端某个需要用户发生交互的场景可以导致远程代码执行，报告到爱奇艺SRC<br>2020-01-08：发现报告被关闭，留言反馈<br>2020-01-09：发送邮件到<a href="mailto:&#55;&#x31;&#115;&#114;&#99;&#64;&#x71;&#x69;&#x79;&#x69;&#x2e;&#x63;&#111;&#x6d;">&#55;&#x31;&#115;&#114;&#99;&#64;&#x71;&#x69;&#x79;&#x69;&#x2e;&#x63;&#111;&#x6d;</a><br>2020-01-09：爱奇艺SRC负责人表示审核人员看错了，让我重复提交一次<br>2020-01-10：重新提交了漏洞<br>2020-02-21：通过QQ向爱奇艺SRC运营反馈这个漏洞不应该被评为中危应该是高危，对方表示会讨论<br>2020-03-06：再次通过QQ向爱奇艺SRC运营询问，对方表示还没有上班<br>2020-04-01：再次通过QQ向爱奇艺SRC运营询问，对方表示这周之内答复<br>2020-04-03：和爱奇艺SRC运营讨论交流，对他们的工作提出了批评和质疑，对方补发了金币和奖励</p>
<p>我不能理解的事情有这么几个：<br>1.市值上百亿美元的美股上市公司审核漏洞为何如此随意？一个能影响爱奇艺windows客户端至少几百万用户的高危漏洞能被审核人员看错直接忽略？我在漏洞下面留言没有回应，直到我发邮件询问。爱奇艺SRC的运营流程和审核人员工作的专业和态度为什么有这么严重的问题？</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXafot.png"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GX2O0K.png"></p>
<p>2.为什么我联系爱奇艺SRC运营详细说明了我认为为什么应该评高危而不是中危之后，仍然一直不给我答复，期间我不得不两次询问？</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GX2fTU.jpg"></p>
<p>3.我和爱奇艺SRC运营沟通的过程中一直保持文明礼貌，克制自己的情绪，爱奇艺SRC运营为什么给我发送了一个微笑的表情？</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GX27lR.jpg"></p>
<p>4.为什么不给我道歉？是不是爱奇艺SRC觉得白帽子好欺负还是爱奇艺SRC觉得自己很牛逼不需要道歉又或者是爱奇艺SRC觉得自己什么也没有做错？</p>
<p>我那天在朋友圈吐槽完了之后觉得还没有发泄够，于是给<a href="mailto:&#55;&#x31;&#115;&#x72;&#x63;&#64;&#x71;&#x69;&#x79;&#x69;&#46;&#x63;&#111;&#x6d;">&#55;&#x31;&#115;&#x72;&#x63;&#64;&#x71;&#x69;&#x79;&#x69;&#46;&#x63;&#111;&#x6d;</a>发了邮件，问了他们这几个问题，同时我也问他们爱奇艺SRC存在的意义是什么？是觉得其它公司有所以我们也要有糊弄一下就行给老板做一下样子还是真的觉得安全问题很重要？</p>
<p>因为我不想再理这群人，所以我邮件里面说请你们不要回复我。之后爱奇艺SRC负责人在之前拉的群里说可以给我补偿一张爱奇艺年卡激活码，当然仍然没有道歉。我不想理他，他加我QQ好友我也没通过，因为我作为一名安全研究人员已经被这家SRC侮辱到体无完肤，我很担心他对我继续进行侮辱。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GX2Tp9.jpg"></p>
<p>我虽然穷但是我不是为了钱，我只是想讲道理。开始认定中危给了我100个积分，死皮烂脸扯了这么久补发了我100个积分，按照爱奇艺SRC上的规定相当于能换300块+300块的京东卡，我特么还真的不在乎。不是说嫌钱少，甲方做安全可能资源是有限的，钱少不是不可以理解，但是该高危为什么要评中危？我也明确承认是需要用户交互的，无意夸大漏洞危害，无交互就应该是“严重”而不是“高危”了。</p>
<p>前段时间一篇文章有人吐槽微博一个漏洞在微博SRC换了一条毛巾。不管是低廉的奖励，不公正的漏洞定级甚至是对安全研究人员言语上的不尊重等等种种侮辱行为我都不是第一个遭遇的，也不会是最后一个，那为什么会出这种事情？</p>
<p>我觉得是跟大环境有关。project zero经常因为90天内厂商没有修复漏洞就披露细节，还有前两年像sandboxescaper这样windows的0day一个接着一个发的。国内你要是敢这么玩轻则被约谈喝茶，重则涉及到的厂商直接起诉你。所以国外厂商普遍也更重视SRC建设，白帽子劳动成果能得到尊重，因为你把人家惹到了直接发0day所有人都会看你笑话。而国内厂商料定白帽子不敢披露漏洞，于是就对白帽子进行各种侮辱。</p>
<p>看起来好像对白帽子披露漏洞不加限制更加危险，实际上是好处大于坏处的。真正像sandboxescaper这样一心搞破坏的人几乎可以忽略不计(看他推现在也好像是被微软招安了)，绝大部分白帽子厂商给了足够的金钱和尊重都不想搞出什么事情。为什么规则应该倾向白帽子还有一个原因是白帽子面对厂商是弱势群体。国内厂商之间各种报团，很多SRC漏洞评价标准都是一起制定的，经常各种开会扯淡拉关系，而白帽子之间很难形成一个类似于工会的组织维护白帽子的权益。不爽了也就只能发个帖子吐吐槽，不然还敢怎么样呢？</p>
<p>这几年网络安全这一行好像还挺火，一直有新人干这行，虽然时不时有白帽子和SRC扯起来但是大大小小的SRC也不愁没有人来报洞。但是国内白帽子这样的生存环境一直持续五年十年之后呢？</p>
<p>更新：不知道为什么爱奇艺SRC的负责人在我写这篇博客的当天就看到了然后来找我了。我不想再说这件事情了，到此为止。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXf6ld.jpg"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXfySH.jpg"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXfrfe.jpg"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXfDYD.jpg"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXfc6A.jpg"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-04-01T06:45:41.000Z" title="4/1/2019, 2:45:41 PM">2019-04-01</time>发表</span><span class="level-item"><time dateTime="2021-08-05T01:56:30.360Z" title="8/5/2021, 9:56:30 AM">2021-08-05</time>更新</span><span class="level-item">7 分钟读完 (大约1110个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/01/%E7%BB%99linux%E5%86%85%E6%A0%B8%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/">给linux内核提交代码</a></h1><div class="content"><p>关于如何给linux内核提交代码这个问题其实有官方的非常详细的文档，网上也有很多文章。但是这些文档要么就是太长读不下去要么就是缺乏关键步骤。因为给linux内核提交代码不是在github上pull一个request就完事了，你想想代码那么多，大家天天去pull request人家Linus Torvalds也看不过来。linux内核每个模块的代码是有不同的人负责的，我们想要提交代码需要把patch通过邮件发给对应的维护者。我第一次看如何给linux内核提交代码的官方文档的时候看了下文章长度几乎都想放弃提交了。今天刚好看到一个觉得可以提交的点，所以做一下记录，希望我写的步骤尽量简洁。</p>
<p>首先安装几个必要的软件：<code>sudo apt-get install esmtp mutt vim git</code></p>
<p>vim和git就不用说了，esmtp是mstp的拓展，mutt是linux下收发邮件的程序。</p>
<p>在home目录下创建下面几个配置文件。</p>
<p>.muttrc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set sendmail=&quot;/usr/bin/esmtp&quot;</span><br><span class="line">set envelope_from=yes</span><br><span class="line">set from=&quot;Your Name &lt;my.email@gmail.com&gt;&quot;</span><br><span class="line">set use_from=yes</span><br><span class="line">set edit_headers=yes</span><br></pre></td></tr></table></figure>

<p>.esmtprc</p>
<p>设置文件权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod g-rwx ~/.esmtprc</span><br><span class="line">chmod o-rwx ~/.esmtprc</span><br></pre></td></tr></table></figure>

<p>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">identity &quot;my.email@gmail.com&quot;</span><br><span class="line">hostname smtp.gmail.com:587</span><br><span class="line">username &quot;my.email@gmail.com&quot;</span><br><span class="line">password &quot;ThisIsNotARealPassWord&quot;</span><br><span class="line">starttls required </span><br></pre></td></tr></table></figure>

<p>.gitconfig</p>
<p>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[user]</span><br><span class="line">   name = Your Name</span><br><span class="line">   email = your.email@example.com </span><br></pre></td></tr></table></figure>

<p>如果你用的是gmail，在“设置”-&gt;“转发和 POP/IMAP”中勾选“启用 IMAP”并保存更改。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXa3GT.png"></p>
<p>需要注意的是这些配置文件中应该用相同的邮箱和姓名，姓名最好填自己的真实姓名，不要填一个奇奇怪怪的。然后我们把内核代码clone下来。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git</span><br></pre></td></tr></table></figure>

<p>备份原来的文件，修改，生成patch。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SRCTREE= linux</span><br><span class="line">MYFILE=  drivers/net/mydriver.c</span><br><span class="line"></span><br><span class="line">cd $SRCTREE</span><br><span class="line">cp $MYFILE $MYFILE.orig</span><br><span class="line">vi $MYFILE      # make your change</span><br><span class="line">cd ..</span><br><span class="line">diff -up $SRCTREE/$MYFILE&#123;.orig,&#125; &gt; /tmp/patch</span><br></pre></td></tr></table></figure>

<p>用<code>git status</code>命令查看改变了哪些文件。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaYM4.png"></p>
<p>用<code>git diff</code>命令查看具体修改的内容。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaGzF.png"></p>
<p>用<code>git add</code>命令将要提交的文件的信息添加到索引库中。如果再运行<code>git diff</code>命令就看不到之前修改的文件了。运行<code>git status</code>命令可以看到提示信息由<code>Changes not staged for commit</code>变成了<code>Changes to be committed</code>，文件名也由红色变成了绿色。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXa8RU.png"></p>
<p>如果此时想放弃这次修改，可以使用<code>git reset &lt;file&gt;</code>移除已经添加到索引库中的改变。使用<code>git commit -s -v</code>命令提交我们的修改，此时会添加<code>Signed-off-by:</code>这一行。然后我们需要写清楚为什么要这么改。第一行写上”更改的子模块”+”: “+”简要描述修改的内容”。然后接下来再详细描述。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXatsJ.png"></p>
<p>使用<code>git show HEAD</code>命令查看我们的commit。使用<code>git format-patch -o /tmp/ HEAD^</code>生成patch。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaNL9.png"></p>
<p>检查下有无格式错误。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXadd1.png"></p>
<p>看看应该发邮件给谁。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXawIx.png"></p>
<p>前两个maintainer是收件人，需要抄送给open list。我们最好先给自己发一封邮件再次确认一切无误。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaBi6.png"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaDJK.png"></p>
<p>好了，现在可以发邮件了。之后就是等待给我们回复，可能会接受我们的commit，可能会拒绝我们的commit，可能会要求我们再修改，这都很正常。接受我们的commit之后还需要等一段时间才会被加入内核代码。到时候你会还收到邮件。比如我的commit是6月19日被接受的，7月2日被加到4.14/4.19/5.1-stable tree中。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXarRO.png"></p>
<p>如果你用的不是gmail或者不想用mutt一些步骤可能会不太一样。建议参考下面两份官方文档。</p>
<p>1.<a target="_blank" rel="noopener" href="https://kernelnewbies.org/FirstKernelPatch">FirstKernelPatch</a></p>
<p>2.<a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/v4.18/process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-04-01T06:45:41.000Z" title="4/1/2019, 2:45:41 PM">2019-04-01</time>发表</span><span class="level-item"><time dateTime="2021-08-05T01:55:32.090Z" title="8/5/2021, 9:55:32 AM">2021-08-05</time>更新</span><span class="level-item">9 分钟读完 (大约1367个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/04/01/%E8%AF%BB%E3%80%8AMalware%20Data%20Science%E3%80%8B/">读《Malware Data Science》</a></h1><div class="content"><p>今年一直在强迫自己有空多看点书，会慢慢分享一些读后感。</p>
<p>《Malware Data Science》这本书读之前我的期望比较高，虽然我没打算深入做这个方向，但是现在太多关于病毒分析的书了，写来写去都是那些东西，有这么一本从数据科学的角度讲病毒分析的书感觉很难得。但是大致读完之后，还是有点失望。满分100分只能打个60分，个人觉得属于读不读都可以的那种。</p>
<p>这本书一共有12章，第1章是介绍，第2章是静态分析，第3章是动态分析，可以直接跳过。下面重点说第4章到第12章。</p>
<p>第4章：教你怎么画图来识别攻击活动。书上举的两个例子一是把相同CC的样本连在一起，二是把含有相同图片的样本连在一起，分别用的APT1和木马样本。大概效果像下面这样。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUX8O.png"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUOPK.png"></p>
<p>大家都懂的，想看的话就别指望国内出翻译版了。</p>
<p>这种系统首先就是大名鼎鼎的virustotal的VTgraph了，virustotal官方还出了个virustotal的教程：<a target="_blank" rel="noopener" href="https://storage.googleapis.com/vt-gtm-wp-media/virustotal-for-investigators.pdf">https://storage.googleapis.com/vt-gtm-wp-media/virustotal-for-investigators.pdf</a></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaVxg.png"></p>
<p>国内这样的系统还有腾讯的安图，前几天它们一篇文章中判断今年几个影响恶劣的病毒团伙背后是同一个犯罪组织：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/tmNYp1WHtUxYRE3aRQNUeA">https://mp.weixin.qq.com/s/tmNYp1WHtUxYRE3aRQNUeA</a></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaeMQ.png"></p>
<p>当然还有360网络研究院大数据关联平台和360威胁情报中心(现更名为奇安信威胁情报中心)威胁分析平台：<a target="_blank" rel="noopener" href="https://ti.360.net/blog/articles/apt-c-27-(goldmouse):-suspected-target-attack-against-the-middle-east-with-winrar-exploit/">https://ti.360.net/blog/articles/apt-c-27-(goldmouse):-suspected-target-attack-against-the-middle-east-with-winrar-exploit/</a></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaERS.png"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaAG8.png"></p>
<p>还有微步在线等平台，就不一一列举了。</p>
<p>第5章：共享代码识别，这个其实是很有用的一个功能。比如为什么说VPNFilter与BlackEnergy有关，因为它们都用了相同的方式去修改RC4算法进行加密，如果在分析的时候有这样一个共享代码识别的系统，样本扔进去就跑出来识别出共享了BlackEnergy的代码，能省很多精力和时间。这样的系统目前intezer有一个。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUj2D.png"></p>
<p>这个是免费的，花钱可以有更多高级功能。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUbUx.png"></p>
<p>书上说了有这么几个方法识别二进制文件共享代码：汇编指令，字符串，IAT表，动态API调用。我估计intezer大概主要也就是汇编指令和字符串。最后基于字符串做了一个简单的命令行查询系统。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUq56.png"></p>
<p>还有一个开源的IDA插件Kam1n0，是2015年IDA插件大赛的第二名：<a target="_blank" rel="noopener" href="https://github.com/McGill-DMaS/Kam1n0-Community">https://github.com/McGill-DMaS/Kam1n0-Community</a></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaMaq.png"></p>
<p>第6章：扯了一些机器学习的概念。介绍了机器学习的步骤，特征空间和决策边界概念，模型的过拟合和欠拟合问题，和几个机器学习的算法：逻辑回归，KNN，决策树和随机森林。</p>
<p>第7章：扯了一些机器学习的评价指标。TP、TN、FP、FN，ROC，Precision，TPR，FPR等等。懂机器学习的话，这两章可以直接跳过。</p>
<p>第8章：先用是否被加密和压缩这两个指标作为特征，决策树作为算法写了一个判定恶意文件和正常文件的很简单的示例代码。然后实现了一个更接近实际用的，提取字符串作为特征，随机森林作为算法。</p>
<p>第9章：可视化，教你怎么画一些比较高大上的图，随便截了几张。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUvxe.png"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXaSrd.png"></p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXUzKH.png"></p>
<p>第10章：扯了一些深度学习的概念。神经网络原理是什么，怎么训练神经网络，最后介绍了几种神经网络：前向神经网络，卷积神经网络，自编码神经网络，生成对抗网络，循环神经网络和残差网络。懂的话也可以直接跳过。</p>
<p>第11章：用神经网络检测恶意HTML页面。</p>
<p>第12章：怎么成为一个数据科学家，随便扯扯。</p>
<p>数据科学用于病毒分析当然能做很多有趣的事情。但是打60分的原因是觉得翻翻还是可以，例子都太简单了，机器学习/深度学习这种玄学类的东西，举那么简单的例子基本等于没有举，真正用于实践会遇到很多问题。</p>
<p>其实我是买了书的，但是纸质看起来不太方便，又找了好久才找到pdf，想看看这本书又找不到pdf的话：aG91amluZ3lpMTU5。</p>
<p><img src="https://s1.ax1x.com/2020/04/13/GXapqA.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-11-01T06:45:41.000Z" title="11/1/2018, 2:45:41 PM">2018-11-01</time>发表</span><span class="level-item"><time dateTime="2022-02-12T16:30:53.403Z" title="2/13/2022, 12:30:53 AM">2022-02-13</time>更新</span><span class="level-item">几秒读完 (大约46个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/01/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%AD%A3%E5%BC%8F%E4%B8%8A%E7%BA%BF/">个人博客正式上线</a></h1><div class="content"><p>大二的时候开始写博客，现在觉得还是应该有一个自己的网站，希望能自己总结知识的同时帮助别人学习:)</p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><!--!--><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-01T06:45:41.000Z">2021-08-01</time></p><p class="title"><a href="/2021/08/01/new-dll-hijacking-scenario-found-by-accident/">new dll hijacking scenario found by accident</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-13T06:45:41.000Z">2020-10-13</time></p><p class="title"><a href="/2020/10/13/macOS%E5%92%8CiOS%E9%80%86%E5%90%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">macOS和iOS逆向环境搭建</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-04-05T06:45:41.000Z">2020-04-05</time></p><p class="title"><a href="/2020/04/05/%E4%B8%80%E6%AC%A1%E7%BB%99%E7%88%B1%E5%A5%87%E8%89%BASRC%E6%8A%A5%E5%91%8A%E6%BC%8F%E6%B4%9E%E7%9A%84%E7%BB%8F%E5%8E%86/">一次给爱奇艺SRC报告漏洞的经历</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-04-01T06:45:41.000Z">2019-04-01</time></p><p class="title"><a href="/2019/04/01/%E7%BB%99linux%E5%86%85%E6%A0%B8%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/">给linux内核提交代码</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-04-01T06:45:41.000Z">2019-04-01</time></p><p class="title"><a href="/2019/04/01/%E8%AF%BB%E3%80%8AMalware%20Data%20Science%E3%80%8B/">读《Malware Data Science》</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">十一月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">houjingyi</a><p class="is-size-7"><span>&copy; 2022 houjingyi</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>